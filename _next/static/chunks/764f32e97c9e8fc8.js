(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95875,e=>{"use strict";var t=e.i(43476),l=e.i(71645),r=e.i(6279);let i=[{id:"juhyeok",label:"주혁",role:"기자",img:(0,r.withBasePath)("/cast/juhyeok.jpeg"),bio:"진실을 좇는 기자. 사건의 핵심을 파고들수록 더 큰 압력과 마주한다.",monologueUrl:"https://www.youtube.com/embed/85NtvAH20YA",kind:"main"},{id:"jeongbae",label:"정배",role:"편집장",img:(0,r.withBasePath)("/cast/jeongbae.jpg"),kind:"main"},{id:"seungwook",label:"승욱",role:"변호사",img:(0,r.withBasePath)("/cast/seungwook.jpg"),kind:"main"},{id:"dongyeol",label:"돈결",role:"검사",img:(0,r.withBasePath)("/cast/donkyeol.jpg"),kind:"main"},{id:"wondal",label:"원달",role:"판사",img:(0,r.withBasePath)("/cast/wondal.jpg"),kind:"main"},{id:"man",label:"남자",role:"목소리",kind:"extra"},{id:"woman",label:"여자",role:"목소리",kind:"extra"}];function s(e){switch(e){case"court":return"법정: 심리/증언";case"conflict":return"법정: 공방/대립";case"pressure":return"법정: 압박";default:return"법정: 연계"}}let n=[{a:"juhyeok",b:"jeongbae",courtLabel:s("ally"),personalLabel:"동기",weight:3},{a:"seungwook",b:"juhyeok",courtLabel:s("court"),personalLabel:"동기",weight:3},{a:"seungwook",b:"jeongbae",courtLabel:s("court"),personalLabel:"동기",weight:3},{a:"dongyeol",b:"juhyeok",courtLabel:s("conflict"),personalLabel:"동기",weight:3},{a:"dongyeol",b:"jeongbae",courtLabel:s("conflict"),personalLabel:"동기",weight:3},{a:"dongyeol",b:"seungwook",courtLabel:s("conflict"),personalLabel:"동기",weight:3},{a:"wondal",b:"seungwook",courtLabel:s("court"),personalLabel:"선후배/사제",weight:2},{a:"wondal",b:"dongyeol",courtLabel:s("court"),personalLabel:"선후배/사제",weight:2},{a:"wondal",b:"juhyeok",courtLabel:s("court"),personalLabel:"선후배/사제",weight:2},{a:"wondal",b:"jeongbae",courtLabel:s("court"),personalLabel:"선후배/사제",weight:2}],a=e=>Math.max(0,Math.min(1,e));function o(e,t){return{x:t.left+a(e.x)*t.usableW,y:t.top+a(e.y)*t.usableH}}let d={x:.38,y:.52},c={man:{x:.1,y:.18},woman:{x:.18,y:.18}},h={juhyeok:{jeongbae:{x:.24,y:-.2},seungwook:{x:.32,y:0},dongyeol:{x:.24,y:.22},wondal:{x:.12,y:.36}},jeongbae:{juhyeok:{x:.22,y:-.22},seungwook:{x:.32,y:-.02},dongyeol:{x:.24,y:.2},wondal:{x:.12,y:.36}},seungwook:{wondal:{x:.22,y:-.24},juhyeok:{x:.32,y:-.04},jeongbae:{x:.28,y:.16},dongyeol:{x:.14,y:.34}},dongyeol:{wondal:{x:.2,y:-.22},juhyeok:{x:.32,y:-.02},jeongbae:{x:.24,y:.18},seungwook:{x:.12,y:.36}},wondal:{seungwook:{x:.26,y:-.22},dongyeol:{x:.32,y:-.02},juhyeok:{x:.26,y:.2},jeongbae:{x:.12,y:.36}}};function x(e,t,l){return{x:e.x+(t.x-e.x)*l,y:e.y+(t.y-e.y)*l}}function u(e){return Math.max(50,Math.min(150,12*e.length+10))}function m({state:e,dispatch:s,showEdgeLabels:m=!0}){let{ref:b,size:g}=function(){let e=(0,l.useRef)(null),[t,r]=(0,l.useState)({width:900,height:540});return(0,l.useEffect)(()=>{let t=e.current;if(!t)return;let l=new ResizeObserver(e=>{let t=e[0]?.contentRect;t&&r({width:Math.max(320,Math.floor(t.width)),height:Math.max(360,Math.floor(t.height))})});return l.observe(t),()=>l.disconnect()},[]),{ref:e,size:t}}(),[w,p]=(0,l.useState)("steady"),[f,y]=(0,l.useState)(!1),[j,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=requestAnimationFrame(()=>k(!0));return()=>cancelAnimationFrame(e)},[]);let v=`${e.mode}:${e.selectedId??"none"}`,N=(0,l.useRef)([]),L=()=>{N.current.forEach(e=>window.clearTimeout(e)),N.current=[]},I="focused"===e.mode&&!!e.selectedId;(0,l.useEffect)(()=>{if(L(),I){y(!0),p("hiding"),N.current.push(window.setTimeout(()=>p("moving"),120)),N.current.push(window.setTimeout(()=>p("showing"),630)),N.current.push(window.setTimeout(()=>p("steady"),1030));return}return f?(p("leaving"),N.current.push(window.setTimeout(()=>{y(!1),p("steady")},160))):p("steady"),()=>L()},[v]);let R=(0,l.useMemo)(()=>(function(e){let{state:t,characters:l,relations:r}=e,i=l.filter(e=>"main"===e.kind),s=l.filter(e=>"extra"===e.kind);if("idle"===t.mode||"special"===t.mode)return{nodes:[...i,...s].map(e=>({...e,graphRole:"idle"})),edges:[]};let n=t.selectedId;if(!n)return{nodes:[],edges:[]};let a=i.find(e=>e.id===n);if(!a)return{nodes:[...i,...s].map(e=>({...e,graphRole:"idle"})),edges:[]};let o=i.filter(e=>e.id!==n);return{nodes:[{...a,graphRole:"center"},...o.map(e=>({...e,graphRole:"outer"})),...s.map(e=>({...e,graphRole:"idle"}))],edges:r.filter(e=>e.a===n||e.b===n).map(e=>({a:e.a,b:e.b,courtLabel:e.courtLabel,personalLabel:e.personalLabel,weight:e.weight}))}})({state:e,characters:i,relations:n}),[e]),M=(0,l.useMemo)(()=>(function(e){var t,l,r;let i,s,n,x,u,m,b=(t=e.widthPx,l=e.heightPx,r=e.insetsPx,i=r?.left??0,s=r?.right??0,n=r?.top??0,x=r?.bottom??0,u=Math.max(1,t-i-s),m=Math.max(1,l-n-x),{left:i,top:n,usableW:u,usableH:m}),g=new Map;if("focused"!==e.mode||!e.selectedId){let t=e.nodes,l=Math.max(1,t.length);return t.forEach((e,t)=>{g.set(e.id,o({x:.06+.8799999999999999*(1===l?.5:t/(l-1)),y:.18},b))}),{posById:g}}let w=e.selectedId;for(let[e,t]of(g.set(w,o(d,b)),Object.entries(c)))g.set(e,o(t,b));let p=h[w]??{};return e.nodes.filter(e=>"outer"===e.graphRole).forEach(e=>{let t=p[e.id]??{x:.26,y:.2},l={x:1.22*t.x,y:1.22*t.y},r={x:d.x+l.x,y:d.y+l.y};g.set(e.id,o({x:a(r.x),y:a(r.y)},b))}),{posById:g}})({mode:e.mode,selectedId:e.selectedId,nodes:R.nodes,widthPx:g.width,heightPx:g.height,insetsPx:{left:24,right:24,top:0,bottom:72}}),[e.mode,e.selectedId,R.nodes,g.width,g.height]).posById,$=`opacity ${"showing"===w?260:120}ms ease`,C=f&&void 0!==m?I||"leaving"===w||"hiding"===w||"moving"===w||"showing"===w:f,A=j?"transform 650ms cubic-bezier(0.22, 1, 0.36, 1)":"none";return(0,t.jsx)("div",{ref:b,className:"relative w-full h-[70vh] min-h-[620px]",children:(0,t.jsxs)("svg",{width:g.width,height:g.height,className:"block",children:[C?(0,t.jsx)("g",{style:{opacity:+("showing"===w||"steady"===w),transition:$},children:R.edges.map((l,r)=>{let i=M.get(l.a),s=M.get(l.b);if(!i||!s)return null;let n=e.selectedId??"",a=l.a===n,o=l.b===n,d=x(i,s,a?.35:o?.65:.5),c=x(i,s,a?.65:o?.35:.5),h=Math.max(1.2,(l.weight??1)*1.4),b=u(l.courtLabel),g=u(l.personalLabel);return(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:i.x,y1:i.y,x2:s.x,y2:s.y,stroke:"white",strokeWidth:h,opacity:.65}),m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("g",{transform:`translate(${d.x}, ${d.y})`,children:[(0,t.jsx)("rect",{x:-b/2,y:-12,width:b,height:24,rx:10,fill:"rgba(0,0,0,0.65)",stroke:"rgba(255,255,255,0.18)"}),(0,t.jsx)("text",{textAnchor:"middle",dominantBaseline:"central",fontSize:11,fill:"white",stroke:"rgba(0,0,0,0.75)",strokeWidth:3,style:{paintOrder:"stroke"},children:l.courtLabel})]}),(0,t.jsxs)("g",{transform:`translate(${c.x}, ${c.y+18})`,children:[(0,t.jsx)("rect",{x:-g/2,y:-12,width:g,height:24,rx:10,fill:"rgba(0,0,0,0.55)",stroke:"rgba(255,255,255,0.14)"}),(0,t.jsx)("text",{textAnchor:"middle",dominantBaseline:"central",fontSize:11,fill:"white",stroke:"rgba(0,0,0,0.75)",strokeWidth:3,style:{paintOrder:"stroke"},children:l.personalLabel})]})]}):null]},`${l.a}-${l.b}-${r}`)})}):null,R.nodes.map(l=>{var i;let n=M.get(l.id);if(!n)return null;let a="center"===l.graphRole,o=a?36:28,d=(i=l.id,`clip-${i.replace(/[^a-zA-Z0-9_-]/g,"_")}`),c=`${l.label}${l.role?` \xb7 ${l.role}`:""}`;return(0,t.jsxs)("g",{onClick:()=>(e=>{"man"===e||"woman"===e?s({type:"CLICK_EXTRA",id:e}):s({type:"CLICK_MAIN",id:e})})(l.id),className:"cursor-pointer",style:{transform:`translate(${n.x}px, ${n.y}px)`,transition:A,transformBox:"fill-box",transformOrigin:"center"},children:[(0,t.jsx)("circle",{r:o,fill:"rgba(0,0,0,0.55)",stroke:"white",strokeWidth:a?1.6:1.2,opacity:.95}),l.img?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:d,children:(0,t.jsx)("circle",{r:o-2})})}),(0,t.jsx)("image",{href:(0,r.withBasePath)(l.img),x:-(o-2),y:-(o-2),width:(o-2)*2,height:(o-2)*2,clipPath:`url(#${d})`,preserveAspectRatio:"xMidYMid slice",opacity:.98})]}):(0,t.jsx)("text",{textAnchor:"middle",dominantBaseline:"central",fontSize:12,fill:"white",children:l.label}),"focused"===e.mode?(0,t.jsx)("g",{transform:`translate(0, ${o+18})`,children:(0,t.jsx)("text",{textAnchor:"middle",dominantBaseline:"central",fontSize:12,fill:"white",stroke:"rgba(0,0,0,0.75)",strokeWidth:3,style:{paintOrder:"stroke"},children:c})}):null]},l.id)})]})})}function b({id:e,onClose:s,onShowVideo:a}){var o;let d=(0,l.useMemo)(()=>i.find(t=>t.id===e)??null,[e]),c=(0,l.useMemo)(()=>d&&"main"===d.kind?n.filter(t=>t.a===e||t.b===e).map(t=>{let l=t.a===e?t.b:t.a,r=i.find(e=>e.id===l)??null;return r?{otherId:l,otherLabel:r.label,otherRole:r.role,courtLabel:t.courtLabel,personalLabel:t.personalLabel,weight:t.weight}:null}).filter(Boolean):[],[d,e]);if(!d)return(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/50 p-5 text-white",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"인물을 찾을 수 없습니다"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-white/60",children:"데이터(id)가 일치하는지 확인하세요."}),(0,t.jsx)("button",{type:"button",onClick:s,className:"mt-5 w-full rounded-xl border border-white/15 bg-white/5 px-3 py-3 text-sm text-white/85 hover:bg-white/10 transition",children:"닫기"})]});let h="extra"===d.kind||"male"===(o=d.id)||"female"===o,x=!!d.monologueUrl;return(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-black/50 p-5 text-white",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"text-lg font-semibold",children:[d.label,d.role?(0,t.jsxs)("span",{className:"ml-2 text-sm text-white/70",children:["· ",d.role]}):null]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-white/50",children:["ID: ",d.id]})]}),(0,t.jsx)("button",{type:"button",onClick:s,className:"shrink-0 rounded-lg border border-white/15 bg-white/5 px-3 py-2 text-sm text-white/80 hover:bg-white/10 transition",children:"닫기"})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-start gap-4",children:[(0,t.jsx)("div",{className:"h-16 w-16 shrink-0 overflow-hidden rounded-xl border border-white/10 bg-black/30",children:d.img?(0,t.jsx)("img",{src:(0,r.withBasePath)(d.img),alt:d.label,className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-white/60",children:"NO IMG"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-white/80 leading-relaxed",children:d.bio??"설명이 아직 등록되지 않았습니다."}),h?(0,t.jsx)("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/30 px-3 py-2 text-sm text-white/70",children:"이 인물은 다역/내레이션 성격이 강해 관계도 정렬(링크)에는 포함되지 않습니다."}):null]})]}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"w-full rounded-xl border border-white/15 bg-white/5 px-3 py-3 text-sm text-white/85 hover:bg-white/10 transition",children:"선택 해제"}),(0,t.jsx)("button",{type:"button",onClick:()=>{x&&a()},disabled:!x,className:["w-full rounded-xl border px-3 py-3 text-sm transition",x?"border-white/15 bg-white/5 text-white/85 hover:bg-white/10":"border-white/10 bg-white/0 text-white/35 cursor-not-allowed"].join(" "),children:"영상 보기"})]}),h?null:(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-white/85",children:"관계 요약"}),(0,t.jsx)("div",{className:"mt-2 text-xs text-white/55",children:"링크의 중심 쪽은 법정 관계, 상대 쪽은 개인 관계로 표시됩니다."}),(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[c.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-black/25 px-3 py-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,t.jsxs)("div",{className:"text-sm text-white/85",children:[e.otherLabel,e.otherRole?(0,t.jsxs)("span",{className:"ml-2 text-xs text-white/60",children:["· ",e.otherRole]}):null]})}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap gap-2",children:[(0,t.jsxs)("span",{className:"rounded-lg border border-white/10 bg-black/40 px-2 py-1 text-xs text-white/75",children:["법정: ",e.courtLabel]}),(0,t.jsxs)("span",{className:"rounded-lg border border-white/10 bg-black/30 px-2 py-1 text-xs text-white/70",children:["개인: ",e.personalLabel]})]})]},e.otherId)),0===c.length?(0,t.jsx)("div",{className:"rounded-xl border border-white/10 bg-black/25 px-3 py-3 text-sm text-white/60",children:"관계 정보가 없습니다."}):null]})]})]})}function g({selected:e}){let r=(0,l.useRef)(null),[i,s]=(0,l.useState)(!1),n=e?.monologueUrl??"",a=(0,l.useMemo)(()=>n?function(e){if(e.includes("youtube.com/embed/"))return e;let t=e.match(/[?&]v=([^&]+)/);if(t?.[1])return`https://www.youtube.com/embed/${t[1]}`;let l=e.match(/youtu\.be\/([^?&]+)/);return l?.[1]?`https://www.youtube.com/embed/${l[1]}`:e}(n):"",[n]);return(0,l.useEffect)(()=>{let e=r.current;if(!e)return;let t=new IntersectionObserver(([e])=>{e.isIntersecting&&s(!0)},{root:null,threshold:.15});return t.observe(e),()=>t.disconnect()},[]),(0,t.jsxs)("section",{ref:r,className:["rounded-2xl border border-white/10 bg-black/25 p-5 transition duration-700 will-change-transform",i?"opacity-100 translate-y-0":"opacity-0 translate-y-10"].join(" "),children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-xl font-semibold text-white",children:"인물 독백 영상"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-white/60",children:"선택한 인물의 독백(또는 관련 영상)을 확인할 수 있습니다."})]})}),(0,t.jsx)("div",{className:"mt-4 rounded-2xl border border-white/10 bg-black/40 p-4",children:e?a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-sm text-white/80",children:["현재 선택: ",(0,t.jsx)("span",{className:"font-semibold",children:e.label}),e.role?(0,t.jsxs)("span",{className:"text-white/60",children:[" · ",e.role]}):null]}),(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-white/10 bg-black/50",children:(0,t.jsx)("div",{className:"relative w-full",style:{paddingTop:"56.25%"},children:(0,t.jsx)("iframe",{className:"absolute inset-0 h-full w-full",src:a,title:`${e.label} video`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),e.bio?(0,t.jsx)("div",{className:"mt-3 text-sm text-white/60 leading-relaxed",children:e.bio}):null]}):(0,t.jsxs)("div",{className:"text-sm text-white/65 leading-relaxed",children:[(0,t.jsx)("span",{className:"text-white/85 font-semibold",children:e.label}),"의 영상이 아직 등록되지 않았습니다."]}):(0,t.jsx)("div",{className:"text-sm text-white/65 leading-relaxed",children:"아직 선택된 인물이 없습니다. 상단에서 인물을 선택한 뒤 “영상 보기”를 눌러주세요."})})]})}function w({children:e,className:r,delayMs:i=0}){let s=(0,l.useRef)(null),[n,a]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=s.current;if(!e)return;let t=new IntersectionObserver(([e])=>{e.isIntersecting&&a(!0)},{threshold:.18,rootMargin:"0px 0px -10% 0px"});return t.observe(e),()=>t.disconnect()},[]),(0,t.jsx)("div",{ref:s,className:["will-change-transform will-change-opacity",n?"opacity-100 translate-y-0":"opacity-0 translate-y-12",r??""].join(" "),style:{transitionProperty:"opacity, transform",transitionDuration:"900ms",transitionTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",transitionDelay:`${i}ms`},children:e})}let p={mode:"idle",selection:null,selectedId:null};function f(e){return{selection:e,selectedId:e?.id??null}}function y(e,t){switch(t.type){case"HYDRATE":{let e=t.selection??null;if(!e)return p;if("main"===e.kind)return{mode:"focused",...f(e)};return{mode:"special",...f(e)}}case"CLICK_MAIN":return{mode:"focused",...f({kind:"main",id:t.id})};case"CLICK_EXTRA":return{mode:"special",...f({kind:"extra",id:t.id})};case"CLEAR":return p;default:return e}}function j(){let[e,r]=(0,l.useReducer)(y,p),[s,n]=l.default.useState(!0),a=(0,l.useRef)(null),o=(0,l.useMemo)(()=>e.selectedId?i.find(t=>t.id===e.selectedId)??null:null,[e.selectedId]),d="idle"!==e.mode&&!!e.selectedId;return(0,t.jsxs)("div",{className:"w-full pt-20",children:[(0,t.jsx)(w,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_420px] gap-4 items-start",children:[(0,t.jsxs)("div",{className:"relative rounded-2xl border border-white/10 bg-black/25 p-2",children:[(0,t.jsxs)("div",{className:"absolute right-3 top-3 z-10 flex items-center gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>n(e=>!e),className:"rounded-lg border border-white/15 bg-black/50 px-3 py-2 text-sm text-white/85 hover:bg-white/10 transition",children:["관계 라벨 ",s?"끄기":"켜기"]}),(0,t.jsx)("button",{type:"button",onClick:()=>r({type:"CLEAR"}),className:"rounded-lg border border-white/15 bg-black/50 px-3 py-2 text-sm text-white/85 hover:bg-white/10 transition",children:"전체 보기"})]}),(0,t.jsx)(m,{state:e,dispatch:r,showEdgeLabels:s})]}),(0,t.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-2",children:d&&o?(0,t.jsx)(b,{id:o.id,onClose:()=>r({type:"CLEAR"}),onShowVideo:()=>{a.current?.scrollIntoView({behavior:"smooth",block:"start"})}}):(0,t.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/50 p-5 text-white/70",children:"그래프에서 인물을 클릭해 선택하세요."})})]})}),o?(0,t.jsx)(w,{delayMs:80,children:(0,t.jsx)("div",{ref:a,className:"mt-10",children:(0,t.jsx)(g,{selected:o})})}):null]})}function k(){return(0,t.jsx)(j,{})}e.s(["default",()=>k],95875)}]);